<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Daftar</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #f9e2f4, #fcd5ce, #fff1f5);
      background-size: 200% 200%;
      animation: gradientSlide 12s ease-in-out infinite alternate;
      overflow: hidden;
    }

    .glass {
      backdrop-filter: blur(40px);
      background-color: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 0 50px rgba(255, 192, 203, 0.25);
    }

    @keyframes gradientSlide {
      0% { background-position: 0% 50%; }
      100% { background-position: 100% 50%; }
    }

    @keyframes zoomInFade {
      0% { transform: scale(0.9); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    .bubble {
      position: absolute;
      border-radius: 9999px;
      filter: blur(80px);
      animation: float 16s ease-in-out infinite alternate;
    }

    .bubble1 { background: #fcd5cecc; width: 350px; height: 350px; top: -60px; left: -80px; }
    .bubble2 { background: #ffe3e3aa; width: 250px; height: 250px; bottom: -50px; right: -60px; }

    @keyframes float {
      0% { transform: translateY(0); }
      100% { transform: translateY(-50px); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center relative px-4">

  <div class="bubble bubble1"></div>
  <div class="bubble bubble2"></div>

  <div class="glass w-full max-w-md p-10 rounded-[2rem] z-10 animate-[zoomInFade_1s_ease-out]">
    <h1 class="text-4xl font-bold text-center text-rose-600 mb-8">Daftar ðŸ’–</h1>
    <form id="registerForm" class="space-y-5">
      <input name="name" type="text" placeholder="Nama Lengkap"
        class="w-full px-5 py-3 rounded-xl bg-white/80 border border-rose-200 placeholder-rose-400 focus:ring-2 focus:ring-rose-400 outline-none">
      <input name="email" type="email" placeholder="Email"
        class="w-full px-5 py-3 rounded-xl bg-white/80 border border-rose-200 placeholder-rose-400 focus:ring-2 focus:ring-rose-400 outline-none">
      <input name="password" type="password" placeholder="Password"
        class="w-full px-5 py-3 rounded-xl bg-white/80 border border-rose-200 placeholder-rose-400 focus:ring-2 focus:ring-rose-400 outline-none">
      <button type="submit"
        class="w-full py-3 rounded-xl bg-gradient-to-r from-rose-400 to-pink-500 text-white font-semibold hover:scale-105 transition shadow-xl">Daftar</button>
      <p id="response" class="text-center text-sm text-red-500"></p>
    </form>
    <p class="text-center mt-6 text-sm text-rose-600">Sudah punya akun? <a href="login.html" class="underline font-semibold">Login</a></p>
  </div>

    <script>
    const API_URL = 'https://rifkira.psl17.my.id/api';
    const registerForm = document.getElementById('registerForm');
    if (registerForm) {
      registerForm.addEventListener('submit', async function (e) {
        e.preventDefault();
        const submitBtn = this.querySelector('button[type="submit"]');
        submitBtn.disabled = true;
        submitBtn.innerText = 'Mendaftar...';

        const data = Object.fromEntries(new FormData(this));

        try {
          const res = await fetch(`${API_URL}/register`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data),
          });

          const result = await res.json();
          document.getElementById('response').innerText = result.message || result.error || 'Gagal daftar';

          if (res.ok) {
            registerForm.reset();
          }
        } catch (err) {
          document.getElementById('response').innerText = 'Server error: ' + err.message;
        } finally {
          submitBtn.disabled = false;
          submitBtn.innerText = 'Daftar';
        }
      });
    }
  </script>
  <script src="https://rifkira.psl17.my.id/js/app.js"></script>
</body>
</html>
